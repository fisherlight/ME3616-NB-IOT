###############################################################################
#
# IAR ANSI C/C++ Compiler V8.30.2.160/W32 for ARM         27/Sep/2018  00:43:50
# Copyright 1999-2018 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        C:\Users\Simon\Desktop\STM32L031_EM3616_NB\STM32L031_EM3616_NB\Src\rtc.c
#    Command line =  
#        -f C:\Users\Simon\AppData\Local\Temp\EW45F3.tmp
#        (C:\Users\Simon\Desktop\STM32L031_EM3616_NB\STM32L031_EM3616_NB\Src\rtc.c
#        -D USE_HAL_DRIVER -D STM32L031xx -lcN
#        C:\Users\Simon\Desktop\STM32L031_EM3616_NB\STM32L031_EM3616_NB\EWARM\STM32L031_EM3616_NB\List
#        -o
#        C:\Users\Simon\Desktop\STM32L031_EM3616_NB\STM32L031_EM3616_NB\EWARM\STM32L031_EM3616_NB\Obj
#        --debug --endian=little --cpu=Cortex-M0+ -e --fpu=None --dlib_config
#        "C:\Program Files (x86)\IAR Systems\Embedded Workbench
#        8.1\arm\inc\c\DLib_Config_Full.h" -I
#        C:\Users\Simon\Desktop\STM32L031_EM3616_NB\STM32L031_EM3616_NB\EWARM/../Inc\
#        -I
#        C:\Users\Simon\Desktop\STM32L031_EM3616_NB\STM32L031_EM3616_NB\EWARM/../Drivers/STM32L0xx_HAL_Driver/Inc\
#        -I
#        C:\Users\Simon\Desktop\STM32L031_EM3616_NB\STM32L031_EM3616_NB\EWARM/../Drivers/STM32L0xx_HAL_Driver/Inc/Legacy\
#        -I
#        C:\Users\Simon\Desktop\STM32L031_EM3616_NB\STM32L031_EM3616_NB\EWARM/../Drivers/CMSIS/Device/ST/STM32L0xx/Include\
#        -I
#        C:\Users\Simon\Desktop\STM32L031_EM3616_NB\STM32L031_EM3616_NB\EWARM/../Drivers/CMSIS/Include\
#        -I
#        C:\Users\Simon\Desktop\STM32L031_EM3616_NB\STM32L031_EM3616_NB\EWARM\..\Drivers\ME3616\INC\
#        -Ohz -I "C:\Program Files (x86)\IAR Systems\Embedded Workbench
#        8.1\arm\CMSIS\Core\Include\" -I "C:\Program Files (x86)\IAR
#        Systems\Embedded Workbench 8.1\arm\CMSIS\DSP\Include\")
#    Locale       =  C
#    List file    =  
#        C:\Users\Simon\Desktop\STM32L031_EM3616_NB\STM32L031_EM3616_NB\EWARM\STM32L031_EM3616_NB\List\rtc.lst
#    Object file  =  
#        C:\Users\Simon\Desktop\STM32L031_EM3616_NB\STM32L031_EM3616_NB\EWARM\STM32L031_EM3616_NB\Obj\rtc.o
#
###############################################################################

C:\Users\Simon\Desktop\STM32L031_EM3616_NB\STM32L031_EM3616_NB\Src\rtc.c
      1          /**
      2            ******************************************************************************
      3            * File Name          : RTC.c
      4            * Description        : This file provides code for the configuration
      5            *                      of the RTC instances.
      6            ******************************************************************************
      7            ** This notice applies to any and all portions of this file
      8            * that are not between comment pairs USER CODE BEGIN and
      9            * USER CODE END. Other portions of this file, whether 
     10            * inserted by the user or by software development tools
     11            * are owned by their respective copyright owners.
     12            *
     13            * COPYRIGHT(c) 2018 STMicroelectronics
     14            *
     15            * Redistribution and use in source and binary forms, with or without modification,
     16            * are permitted provided that the following conditions are met:
     17            *   1. Redistributions of source code must retain the above copyright notice,
     18            *      this list of conditions and the following disclaimer.
     19            *   2. Redistributions in binary form must reproduce the above copyright notice,
     20            *      this list of conditions and the following disclaimer in the documentation
     21            *      and/or other materials provided with the distribution.
     22            *   3. Neither the name of STMicroelectronics nor the names of its contributors
     23            *      may be used to endorse or promote products derived from this software
     24            *      without specific prior written permission.
     25            *
     26            * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
     27            * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
     28            * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
     29            * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
     30            * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
     31            * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
     32            * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
     33            * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
     34            * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
     35            * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     36            *
     37            ******************************************************************************
     38            */
     39          
     40          /* Includes ------------------------------------------------------------------*/
     41          #include "rtc.h"
     42          
     43          /* USER CODE BEGIN 0 */
     44          
     45          /* USER CODE END 0 */
     46          
     47          RTC_HandleTypeDef hrtc;
     48          
     49          /* RTC init function */
     50          void MX_RTC_Init(void)
     51          {
     52            RTC_TimeTypeDef sTime;
     53            RTC_DateTypeDef sDate;
     54          
     55              /**Initialize RTC Only 
     56              */
     57            hrtc.Instance = RTC;
     58            hrtc.Init.HourFormat = RTC_HOURFORMAT_24;
     59            hrtc.Init.AsynchPrediv = 127;
     60            hrtc.Init.SynchPrediv = 255;
     61            hrtc.Init.OutPut = RTC_OUTPUT_DISABLE;
     62            hrtc.Init.OutPutRemap = RTC_OUTPUT_REMAP_NONE;
     63            hrtc.Init.OutPutPolarity = RTC_OUTPUT_POLARITY_HIGH;
     64            hrtc.Init.OutPutType = RTC_OUTPUT_TYPE_OPENDRAIN;
     65            if (HAL_RTC_Init(&hrtc) != HAL_OK)
     66            {
     67              _Error_Handler(__FILE__, __LINE__);
     68            }
     69          
     70              /**Initialize RTC and set the Time and Date 
     71              */
     72            sTime.Hours = 0x2;
     73            sTime.Minutes = 0x50;
     74            sTime.Seconds = 0x30;
     75            sTime.DayLightSaving = RTC_DAYLIGHTSAVING_NONE;
     76            sTime.StoreOperation = RTC_STOREOPERATION_RESET;
     77            if (HAL_RTC_SetTime(&hrtc, &sTime, RTC_FORMAT_BCD) != HAL_OK)
     78            {
     79              _Error_Handler(__FILE__, __LINE__);
     80            }
     81          
     82            sDate.WeekDay = RTC_WEEKDAY_WEDNESDAY;
     83            sDate.Month = RTC_MONTH_SEPTEMBER;
     84            sDate.Date = 0x1;
     85            sDate.Year = 0x18;
     86          
     87            if (HAL_RTC_SetDate(&hrtc, &sDate, RTC_FORMAT_BCD) != HAL_OK)
     88            {
     89              _Error_Handler(__FILE__, __LINE__);
     90            }
     91          
     92          }
     93          
     94          void HAL_RTC_MspInit(RTC_HandleTypeDef* rtcHandle)
     95          {
     96          
     97            if(rtcHandle->Instance==RTC)
     98            {
     99            /* USER CODE BEGIN RTC_MspInit 0 */
    100          
    101            /* USER CODE END RTC_MspInit 0 */
    102              /* RTC clock enable */
    103              __HAL_RCC_RTC_ENABLE();
    104            /* USER CODE BEGIN RTC_MspInit 1 */
    105          
    106            /* USER CODE END RTC_MspInit 1 */
    107            }
    108          }
    109          
    110          void HAL_RTC_MspDeInit(RTC_HandleTypeDef* rtcHandle)
    111          {
    112          
    113            if(rtcHandle->Instance==RTC)
    114            {
    115            /* USER CODE BEGIN RTC_MspDeInit 0 */
    116          
    117            /* USER CODE END RTC_MspDeInit 0 */
    118              /* Peripheral clock disable */
    119              __HAL_RCC_RTC_DISABLE();
    120            /* USER CODE BEGIN RTC_MspDeInit 1 */
    121          
    122            /* USER CODE END RTC_MspDeInit 1 */
    123            }
    124          } 
    125          
    126          /* USER CODE BEGIN 1 */
    127          
    128          /* USER CODE END 1 */
    129          
    130          /**
    131            * @}
    132            */
    133          
    134          /**
    135            * @}
    136            */
    137          
    138          /************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       0   HAL_RTC_MspDeInit
       0   HAL_RTC_MspInit
      40   MX_RTC_Init
        40   -> HAL_RTC_Init
        40   -> HAL_RTC_SetDate
        40   -> HAL_RTC_SetTime
        40   -> _Error_Handler


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable3
       4  ??DataTable3_1
       4  ??DataTable3_2
       4  ??DataTable3_3
      76  ?_0
      20  HAL_RTC_MspDeInit
      22  HAL_RTC_MspInit
     136  MX_RTC_Init
      36  hrtc

 
  36 bytes in section .bss
 270 bytes in section .text
 
 270 bytes of CODE memory
  36 bytes of DATA memory

Errors: none
Warnings: none
